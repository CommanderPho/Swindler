language: objective-c
cache: cocoapods
install: pod install || pod install --repo-update

xcode_workspace: Swindler.xcworkspace
xcode_scheme: Swindler

script:
  - xcodebuild -workspace Swindler.xcworkspace -scheme Swindler build test
  - xcodebuild -workspace Swindler.xcworkspace -scheme SwindlerExample build

matrix:
  include:
    - osx_image: xcode10.2
      env: DEPLOY_ENABLED=1
    - osx_image: xcode10.1
    - osx_image: xcode10
    - osx_image: xcode9.4

deploy:
  - provider: script
    script: bash .scripts/update-gh-pages.sh
    skip_cleanup: true
    on:
        all_branches: true
        condition: '"$DEPLOY_ENABLED" == 1 && ("$TRAVIS_BRANCH" == "master" || "$TRAVIS_TAG" != "")'
